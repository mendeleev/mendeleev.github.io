define(["jquery"],function(){function n(){return $.ajax({url:"data/data.json",dataType:"json"})}console.log("dataloading");var a=$(".gallery");n().done(function(n){var i={};if(localStorage.minionsCounter&&(i=JSON.parse(localStorage.getItem("minionsCounter"))),n.forEach(function(n){i[n.nick]||(i[n.nick]={}),i[n.nick].counter||(i[n.nick].counter=n.counter);var o=$("<span></span>").addClass("nick").html(n.nick),t=$("<img />").attr("src","images/"+n.img),r=$("<span></span>").addClass("counter").attr("id",n.id).html(i[n.nick].counter),e=$("<li></li>").attr("id",n.id).addClass("item").append(o).append(t).append(r).appendTo(a);e.click({el:r,nick:n.nick},function(n){var a={};localStorage.minionsCounter&&(a=JSON.parse(localStorage.minionsCounter)),a[n.data.nick]?a[n.data.nick].counter++:(a[n.data.nick]={},a[n.data.nick].counter=0),n.data.el.html(a[n.data.nick].counter),localStorage.minionsCounter=JSON.stringify(a)})}),!localStorage.minionsCounter){JSON.stringify(i);localStorage.minionsCounter=JSON.stringify(i)}}).fail(function(n){$("<span></span>").addClass("error").html("Shit happens :-(").appendTo(a),$("<img />").addClass("error-img").attr("src","images/Minion-Error-icon.png").appendTo(a),console.log(n.statusText)})});